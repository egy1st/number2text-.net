(function(){$.fn.extend({bhPageScrollWatcher:function(b){var a=0;return this.scroll(function(){var c=Math.floor($(this).scrollTop()/b);if(c>a){a=c;if(typeof bhOnScrollPage=="function"){bhOnScrollPage(a)}}})}})})();(function(){$.fn.extend({bhLinkClickWatcher:function(){return this.delegate("a","click",function(){if(typeof bhOnLinkClicked=="function"){bhOnLinkClicked(this)}})}})})();(function(){$.fn.extend({bhPageUnloadWatcher:function(){var b=$.now();var a=false;$("iframe").mouseover(function(){a=true});$("iframe").mouseout(function(){a=false});return this.unload(function(){if(typeof bhOnPageUnload=="function"){bhOnPageUnload(a,b,$.now())}})}})})();(function(){$.fn.extend({bhPageHeartbeatWatcher:function(b){var d=$.now();var a=0;var c=function(e){if(typeof bhOnPageHeartbeat=="function"&&a!=0){bhOnPageHeartbeat(a)}if(20==a){return}a++;setTimeout(function(){c(e)},e)};c(b);return this}})})();var bhEventTracker=function(b,c){bhConsoleLog("init BH Tracker for postId: {0}".format(b));this.iFrameId="viewCounterFrame";this.iFrameLocator="#{0}".format(this.iFrameId);this.iFrameSrcTemplate="http://www.brighthub.com/ajax/viewcounterjqueryproxy.aspx?postid={0}&page={1}&imageid={2}&commentpage={3}&referrer={4}";this.pagePostId=b;this.pageReferer=encodeURIComponent(c);var a="<iframe id='{0}' height='0' width='0' style='border: 0'></iframe>".format(this.iFrameId);if($(this.iFrameLocator).length==0){$("body").append(a)}};bhEventTracker.prototype.trackPageView=function(a){this.track(a,0)};bhEventTracker.prototype.trackImageView=function(a){this.track(1,a)};bhEventTracker.prototype.track=function(c,b){var a=this.iFrameSrcTemplate.format(this.pagePostId,c,b,0,this.pageReferer);$(this.iFrameLocator).attr("src",a)};