<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- Copyright the Rubicon Project 2010 -->
<html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title></title>
</head>
<body>
<script language="javascript">
	function setCookie(name,value,days) {
		var expires ;
		if (days) {
			var date = new Date();
			date.setTime(date.getTime()+(days*24*60*60*1000));
			expires = "; expires="+date.toGMTString();
		}
		else expires = "";
		document.cookie = name+"="+escape(value)+expires+"; path=/";
	}
	
	function readCookie(name) {
		var nameEQ = name + "=";
		var ca = document.cookie.split(';');
		for(var i=0;i < ca.length;i++) {
			var c = ca[i];
			while (c.charAt(0)==' ') 
				c = c.substring(1,c.length);
			if (c.indexOf(nameEQ) == 0) 
				return unescape(c.substring(nameEQ.length,c.length));
		}
		return null;
	}
	
	function addScriptAsync(url,id)
	{
		var script;
		script = document.createElement("script");
		if (id)
			script.setAttribute("id",id);
		script.setAttribute("type","text/javascript");
		url = url.replace(/\s/g,'+');
		script.setAttribute("src",url);

		document.getElementsByTagName("head").item(0).appendChild(script);
	}

	function addScript(url,id)
	{
		var html = '<SCR'+'IPT TYPE="text/javascript" SRC="'+url+'"><\/SCR'+'IPT>';
		document.write(html);
	}
	
	function mergeProperties(dest,defaults)
	{
		if (typeof(dest) == "undefined" || !dest)
			return defaults;

		if (typeof(defaults) == "undefined" || !defaults)
			return dest;

		for (var name in defaults)
		{
			if (!defaults.hasOwnProperty(name))
				continue;
			if (typeof dest[name] == "undefined")
				dest[name] = defaults[name];
		}
		return dest;
	}

	var rtb_sync = {};
	var rtb_site_sync = {};
	var rtb_pixel_set = ["rtb","aud","nets","pubs"];
	var request_region = "af";
	

	rtb_pixel_set = ["rtb","rtb_ext","aud","nets","pubs"];



	rtb_sync = {"ttl":14,"sample":100,"max_pixels":3,"pixel_sets":{"rtb":{"sample":100,"pixels":{"1185":{"pingdom_id":"399235","ttl":7,"iframe":"http://ad.turn.com/server/pixel.htm?fpid=6&sp=y","partner":"turn"},"2100":{"pingdom_id":"399228","sample":100,"img":"http://cm.netseer.com/redirect?ex=11","partner":"netseer"},"1512":{"pingdom_id":"399231","ttl":7,"img":"http://sync.mathtag.com/sync/img?mt_exid=9","partner":"mediamath"},"1902":{"pingdom_id":"399224","ttl":7,"img":"http://pixel.quantserve.com/pixel/p-e4m3Yko6bFYVc.gif?idmatch=0","partner":"quantcast"},"1430":{"pingdom_id":"399236","sample":75,"img":"http://a.triggit.com/pxrucm","partner":"triggit"},"1994":{"pingdom_id":"399239","sample":100,"img":"http://map.media6degrees.com/orbserv/hbpix?pixId=4857","partner":"media6degrees"},"1197":{"pingdom_id":"399234","sample":50,"img":"http://user.lucidmedia.com/clicksense/user?p=9ce688505699aefa&r=1","partner":"lucidmedia"},"1986":{"pingdom_id":"399240","img":"http://ib.adnxs.com/getuidnb?http%3A%2F%2Fpixel.rubiconproject.com%2Ftap.php%3Fv%3D4894%26nid%3D1986%26put%3D$UID%26expires%3D30","partner":"appnexus"},"w55c":{"pingdom_id":"399222","sample":100,"img":"http://i.w55c.net/ping_match.gif?ei=RUBICON&rurl=http%3A%2F%2Fpixel.rubiconproject.com%2Ftap.php%3Fv%3D4210%26nid%3D1523%26put%3D_wfivefivec_%26expires%3D10","partner":"dataxu"},"2084":{"pingdom_id":"399223","sample":100,"img":"http://pcm3.map.pulsemgr.com/uds/pc?ptnr=21280&sig=6f737abf3f6bb5f84a1ad1dc0be05ab8","partner":"buysight"},"2132":{"pingdom_id":"399225","sample":0,"img":"http://um.simpli.fi/rb_match","partner":"simpli.fi"},"2081":{"pingdom_id":"399219","sample":100,"img":"http://m.xp1.ru4.com/activity?_o=62795&_t=cm_rub_pre","partner":"xplusone"},"2025":{"pingdom_id":"399233","sample":100,"img":"http://www.wtp101.com/pull_sync?pid=rubicon","partner":"adnetik"},"2101":{"pingdom_id":"399226","sample":1,"iframe":"http://tap.rubiconproject.com/oz/feeds/invite-media-rtb/tokens/?rt=iframe","partner":"invitemedia","old_sample":100},"2249":{"pingdom_id":"399227","sample":75,"img":"http://cm.g.doubleclick.net/pixel?google_nid=rubicon&google_cm&google_sc","partner":"invitemedia"},"2046":{"pingdom_id":"399237","sample":0,"img":"http://rubicon-match.dotomi.com/","partner":"dotomi"},"2211":{"pingdom_id":"399230","sample":100,"img":"http://matcher-rbc.bidder7.mookie1.com/do-association?rbc&can=20","partner":"mig"},"2245":{"pingdom_id":"399220","sample":75,"img":"http://rc.d.chango.com/m/rc","partner":"chango"},"2271":{"pingdom_id":"399241","sample":100,"img":"http://rp.gwallet.com/r1/ruum","partner":"radiumone"},"2135":{"pingdom_id":"405200","sample":0,"img":"http://d5p.de17a.com/cookies/rubicon","partner":"adaction"},"2307":{"pingdom_id":"426695","sample":50,"img":"http://match.adsrvr.org/track/cmf/rubicon","partner":"thetradedesk"},"2147":{"pingdom_id":"426696","sample":10,"img":"http://ad.yabuka.com/px/rb.gif","partner":"yabuka"},"2323":{"pingdom_id":"437827","sample":10,"img":"http://relestar.com/cs?p=ri","partner":"relevad"},"2236":{"pingdom_id":"449220","sample":25,"img":"http://p.rightaction.com/px?t=5&x=3","partner":"rightaction"},"2395":{"pingdom_id":"514755","sample":5,"img":"http://px.owneriq.net/erb","partner":"owner-iq"},"2181":{"pingdom_id":"527817","sample":5,"img":"http://pixel.everesttech.net/1/gr?url=http%3a//pixel.rubiconproject.com/tap.php%3fv%3d11782%7c1%7c1%26nid%3d2181%26put%3d__EFGCK__%26expires%3d1&ev_gb=0","partner":"efrontier"},"2054":{"pingdom_id":"528872","sample":5,"img":"http://dis.criteo.com/dis/usersync.aspx?r=6&p=2&cp=rubiconus&url=http%3A%2F%2Fpixel.rubiconproject.com%2Ftap.php%3Fv%3D5421%26nid%3D2054%26put%3D%40%40CRITEO_USERID%40%40%26expires%3D30","region":"na","partner":"criteo-us"}}},"rtb_ext":{"sample":100,"pixels":{"2211ext":{"pingdom_id":"399238","sample":50,"img":"http://matcher-rbc.bidder7.mookie1.com/do-association?rbc","partner":"mig"},"1523ext":{"pingdom_id":"399221","sample":50,"iframe":"http://cti.w55c.net/ct/rubicon-cms2.html","partner":"dataxu"},"2081ext":{"pingdom_id":"439290","sample":10,"iframe":"http://d.xp1.ru4.com/activity?_o=62795&_t=cm_rub_ex","partner":"xplusone"}}},"aud":{"sample":100,"pixels":{"fimservePS":{"pingdom_id":"409342","sample":0,"img":"http://pixel.fimserve.com/fan.php","partner":"rubicon"},"tgi":{"pingdom_id":"399232","sample":10,"img":"http://adadvisor.net/adscores/g.pixel?sid=9278242667","partner":"targus"},"exl":{"pingdom_id":"418697","sample":5,"img":"http://loadm.exelator.com/load/?p=204&g=141&j=0","partner":"exelate"}}},"nets":{"sample":100,"pixels":{"1022":{"pingdom_id":"399862","ttl":2,"script":"http://ad.yieldmanager.com/imp?Z=1x1&B=10&u=&r=1&s=2895169","partner":"yahoo"},"1806":{"pingdom_id":"424014","ttl":7,"sample":1,"iframe":"http://c7.zedo.com/utils/rbC.html","partner":"zedo"},"2341":{"pingdom_id":"429656","ttl":3,"sample":0,"iframe":"http://rt.legolas-media.com/lgrt?ci=12&ti=7158&pbi=10875","region":["na"],"partner":"legolas"},"2317":{"pingdom_id":"434020","ttl":7,"sample":25,"iframe":"http://fei.pro-market.net/engine?site=129429;size=1x1;mimetype=img","region":["na"],"partner":"datonics"}}},"pubs":{"sample":0,"pixels":{}}},"notify":{"rubicon":{"sample":1,"img":"http://tap.rubiconproject.com/stats/rtbsync"}}} ;



	function loadExpiration()
	{
		var map = {};
		var c = readCookie("pux");
		if (!c)
			return map;
		
		var list = c.split("&");
		var name;
		var value;
		for (var i in list)
		{
			var parts = list[i].split("=");
			if (parts.length < 2)
				continue;
			name = parts[0];
			value = parts[1];
			var fields = value.split(",");
			if (fields.length > 0)
			{
				map[name] = { created : fields[0] };
			}
		}
		return map;
	}
	function saveExpiration(map)
	{
		var c="";
		for (name in map)
		{
			var info = map[name];
			
			c += name + "=";
			c += info.created;
			c += "&";
		}
		setCookie("pux",c,90);
	}

	function is_expired(ttl,info)
	{
		if (!info)
			return true;
		ttl = Number(ttl);
		
		var now = new Date().getTime() / (3600*1000);
		var then = new Date(2010,0,1,0,0,0,0).getTime() / (3600*1000);
		var expires = (new Number(info.created) + (ttl * 24));
		
		if ((now - then) < expires)
		{
			return false;
		}
		return true;		
	}
	function shouldFirePixel(pixel)
	{
		var info = expiration_info[pixel.nid];
		if (info && !is_expired(pixel.info.ttl || pixel.context.ttl || rtb_sync.ttl,info))
			return false;
		
		var sample = (pixel.info.sample == 0) ? pixel.info.sample : (pixel.info.sample || pixel.context.sample || rtb_sync.pixel_sample || 0) ;
		sample = Number(sample);	// do simple parsing
		
		if (!(Math.floor(Math.random()*100) < sample))
			return false;
		
		return true;
	}
	
	function firePixel(pixel)
	{
		var days = (pixel.info.ttl || pixel.context.ttl || rtb_sync.ttl || 14);
		var now_hours = Math.floor(new Date().getTime()/(3600*1000));
		var then = new Date(2010,0,1,0,0,0,0).getTime() / (3600*1000);

		expiration_info[pixel.nid] = { created : now_hours-then };
		
		if (pixel.info.img)
			new Image().src = pixel.info.img;
		if (pixel.info.iframe)
			document.write("<iframe src='"+pixel.info.iframe+"' width='1' height='1' frameborder='0'></iframe>");
		if (pixel.info.script)
			addScript(pixel.info.script);
	}

	// Fisher Yates
	function shuffle ( myArray ) 
	{
		  var i = myArray.length;
		  if ( i == 0 ) return false;
		  while ( --i ) 
		  {
			 var j = Math.floor( Math.random() * ( i + 1 ) );
			 var tempi = myArray[i];
			 var tempj = myArray[j];
			 myArray[i] = tempj;
			 myArray[j] = tempi;
		   }
		}
	
	var expiration_info;
	function array_contains(list,item)
	{
		for (e in list)
		{
			if (item == list[e])
				return true;
			
		}
		return false;
	}
	function doPixels()
	{
		var allFired=true;
		var pixels=new Array();
	
		expiration_info = loadExpiration();
		
		// check for 'cookies enabled'
		if (!document.cookie || (document.cookie.length < 1)) 
		{
			setCookie("cd","false",365);
			return;
		} 
		
		// global throttle
		if (!(Math.floor(Math.random()*100) < Number(rtb_sync.sample)))
			return false;

		for (var i in rtb_pixel_set)
		{
			var name = rtb_pixel_set[i];
			var context = rtb_sync.pixel_sets[name];
			if (!context)
				continue;
			for ( nid in context.pixels )
			{
				var info = context.pixels[nid];

				// check for geo region limited scope
				if (request_region && info.region && (info.region != request_region && !array_contains(info.region,request_region)))
					continue;

				// check to see if pixel is expired
				if (is_expired(info.ttl || context.ttl || rtb_sync.ttl,expiration_info[nid]) && (info.sample != 0))
				{
					pixels[pixels.length] = {nid: nid, info : info, context: context}; 
				}   
			}
		}
		allFired = (pixels.length == 0);

		shuffle(pixels);
		var max = rtb_sync.max_pixels || 1;
		for (var i in pixels)
		{
			var pixel = pixels[i];
			
			if (shouldFirePixel(pixel))
			{
				firePixel(pixel);
				max--;
				if (max <= 0)
					break;
			}
		}
		
		if (allFired)
		{
			var nid = "rubicon";
			var info = rtb_sync.notify[nid];
			var pixel = {nid : nid, info : info, context : rtb_sync};
			if (shouldFirePixel(pixel))
			{
				firePixel(pixel);
			}
		}
		saveExpiration(expiration_info);
	}

	doPixels();
			
</script>





</body></html>