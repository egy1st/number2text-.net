(function(a){var e={put:function(g,h){(h||window).location.hash=this.encoder(g)},get:function(i){var h=((i||window).location.hash).replace(/^#/,"");try{return a.browser.mozilla?h:decodeURIComponent(h)}catch(g){return h}},encoder:encodeURIComponent};var b={id:"__jQuery_history",init:function(){var g='<iframe id="'+this.id+'" style="display:none" src="javascript:false;" />';a("body").prepend(g);return this},_document:function(){return a("#"+this.id)[0].contentWindow.document},put:function(h){var g=this._document();g.open();g.close();e.put(h,g)},get:function(){return e.get(this._document())}};function d(h){h=a.extend({unescape:false},h||{});e.encoder=g(h.unescape);function g(j){if(j===true){return function(k){return k}}if(typeof j=="string"&&(j=i(j.split("")))||typeof j=="function"){return function(k){return j(encodeURIComponent(k))}}return encodeURIComponent}function i(j){var k=new RegExp(a.map(j,encodeURIComponent).join("|"),"ig");return function(l){return l.replace(k,decodeURIComponent)}}}var c={};c.base={callback:undefined,type:undefined,check:function(){},load:function(g){},init:function(g,h){d(h);f.callback=g;f._options=h;f._init()},_init:function(){},_options:{}};c.timer={_appState:undefined,_init:function(){var g=e.get();f._appState=g;f.callback(g);setInterval(f.check,100)},check:function(){var g=e.get();if(g!=f._appState){f._appState=g;f.callback(g)}},load:function(g){if(g!=f._appState){e.put(g);f._appState=g;f.callback(g)}}};c.iframeTimer={_appState:undefined,_init:function(){var g=e.get();f._appState=g;b.init().put(g);f.callback(g);setInterval(f.check,100)},check:function(){var g=b.get(),h=e.get();if(h!=g){if(h==f._appState){f._appState=g;e.put(g);f.callback(g)}else{f._appState=h;b.put(h);f.callback(h)}}},load:function(g){if(g!=f._appState){e.put(g);b.put(g);f._appState=g;f.callback(g)}}};c.hashchangeEvent={_init:function(){f.callback(e.get());a(window).bind("hashchange",f.check)},check:function(){f.callback(e.get())},load:function(g){e.put(g)}};var f=a.extend({},c.base);if(a.browser.msie&&(a.browser.version<8||document.documentMode<8)){f.type="iframeTimer"}else{if("onhashchange" in window){f.type="hashchangeEvent"}else{f.type="timer"}}a.extend(f,c[f.type]);a.history=f})(jQuery);